<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Задача 4</h1>
    <p>
      З використанням замикань розробити ітератор, тобто функцію, що буде
      поступово за окремими викликами видавати по одну букву наперед заданого
      слова. З використанням нього розробити гру «Прекладач». Виводимо для
      користувача опис цього слова і по одну букву користувач вводить переклад
      цього слова. Підрахувати кількість вгаданих букв.
    </p>
    <script>
      //передаємо масив з словами
      const guessedWordsArray = ["pen", "car", "book"]
      const answerWordsArray = ["ручка", "машина", "книга"]
      //=====================
      alert(
        'Вас вітає гра "Перекладач". \nВам потрібно розгадати загадане англійське слово і написати його переклад'
      )
      function spellWord(word) {
        let wordArr = [...word]
        let index = -1
        function getNextLetter() {
          if (index === wordArr.length - 1) return wordArr
          else ++index
          return wordArr[index]
        }
        return getNextLetter
      }
      function game(guessedArray, answerArray, textToWord, IndexWordNumber) {
        let i = IndexWordNumber
        let counter = 0
        let ask
        let numberGuessedLetters = 0
        alert(`Підказка: ${textToWord} \n Перша літера -  ${spellLetter()}`)
        counter++
        while (ask !== null) {
          ask = prompt(
            "Введіть переклад цього слова або натисніть: \n `Ок` і покажуть наступну літеру \n `Скасувати` і покажуть наступне слово"
          )
          if (ask === answerArray[i]) {
            alert("Вірно! Наступне слово")
            numberGuessedLetters = guessedArray[i].length - counter
            break
          } else if (ask === null) {
            alert("Наступне слово")
            break
          } else alert("Невірно")

          if (counter === guessedArray[i].length) {
            alert(
              `Нажаль всі спроби вичерпано. \nЗагадане слово: ${guessedArray[i]} \nПереклад: ${answerArray[i]} \nНаступне слово`
            )
            break
          }
          alert(
            `Підказка: ${textToWord} \n Наступна літера -  ${spellLetter()}`
          )
          counter++
        }
        return numberGuessedLetters
      }
      const textWord = [["Цим пишуть"], ["На цьому їздять"], ["Це читають"]]
      let numberGuessedLettersArray = []
      document.write(`К-ть вгаданих букв: <br>`)
      for (let i = 0; i < guessedWordsArray.length; i++) {
        var spellLetter = spellWord(guessedWordsArray[i])
        numberGuessedLettersArray.push(
          game(guessedWordsArray, answerWordsArray, textWord[i], i)
        )

        document.write(
          `Слово ${guessedWordsArray[i]} - ${numberGuessedLettersArray[i]} букв<br>`
        )
      }
      alert("Загадані слова закінчились. Результат на екрані")
    </script>
  </body>
</html>
